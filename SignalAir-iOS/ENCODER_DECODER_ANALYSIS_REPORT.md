# SignalAir ç·¨ç¢¼å™¨/è§£ç¢¼å™¨ä½¿ç”¨åˆ†æå ±å‘Š

## ğŸ“Š ç¸½è¦½çµ±è¨ˆ

| ç·¨ç¢¼å™¨é¡å‹ | ä½¿ç”¨æ¬¡æ•¸ | åŒ¹é…ç‹€æ…‹ | ä¸»è¦ç”¨é€” |
|-----------|----------|----------|----------|
| BinaryMessageEncoder.encode() | 8æ¬¡ | âœ… å®Œå…¨åŒ¹é… | æ¨™æº–MeshMessageç·¨ç¢¼ |
| BinaryMessageEncoder.encodeChatMessage() | 1æ¬¡ | âœ… å·²ä¿®å¾© | èŠå¤©è¨Šæ¯ç·¨ç¢¼ |
| BinaryMessageEncoder.encodeTopology() | 1æ¬¡ | âœ… åŒ¹é… | ç¶²è·¯æ‹“æ’²ç·¨ç¢¼ |
| BinaryMessageDecoder.decode() | 5æ¬¡ | âœ… åŒ¹é… | æ¨™æº–è¨Šæ¯è§£ç¢¼ |
| å…¶ä»–å”è­° | 4æ¬¡ | âœ… åŒ¹é… | ç‰¹æ®Šç”¨é€”å”è­° |

## ğŸ” è©³ç´°ä½¿ç”¨åˆ†æè¡¨æ ¼

### 1. æ¨™æº– MeshMessage ç·¨ç¢¼/è§£ç¢¼

| æ–‡ä»¶ | è¡Œè™Ÿ | ç·¨ç¢¼æ–¹æ³• | è§£ç¢¼æ–¹æ³• | æ•¸æ“šæµå‘ | æ ¼å¼ç‰ˆæœ¬ | ç‹€æ…‹ |
|------|------|----------|----------|----------|----------|------|
| **NetworkService.swift** | 970 | `BinaryMessageEncoder.encode()` | `BinaryMessageDecoder.decode()` | é›™å‘ | v1 | âœ… æ­£å¸¸ |
| **ServiceContainer.swift** | 201,262,1608,1667 | `BinaryMessageEncoder.encode()` | `BinaryMessageDecoder.decode()` | ç™¼é€ | v1 | âœ… æ­£å¸¸ |
| **SignalViewModel.swift** | 737 | `BinaryMessageEncoder.encode()` | - | ç™¼é€ | v1 | âœ… æ­£å¸¸ |
| **SignalViewModel.swift** | 828 | - | `BinaryMessageDecoder.decode()` | æ¥æ”¶ | v1 | âœ… æ­£å¸¸ |
| **MeshManager.swift** | 878,1411 | `BinaryMessageEncoder.encode()` | - | ç™¼é€ | v1 | âœ… æ­£å¸¸ |
| **MeshManager.swift** | 1161 | - | `BinaryMessageDecoder.decode()` | æ¥æ”¶ | v1 | âœ… æ­£å¸¸ |

### 2. èŠå¤©è¨Šæ¯å°ˆç”¨ç·¨ç¢¼/è§£ç¢¼

| æ–‡ä»¶ | è¡Œè™Ÿ | ç·¨ç¢¼æ–¹æ³• | è§£ç¢¼æ–¹æ³• | æ•¸æ“šæ ¼å¼ | ç‹€æ…‹ | å‚™è¨» |
|------|------|----------|----------|----------|------|------|
| **ChatViewModel.swift** | 204 | `BinaryMessageEncoder.encodeChatMessage()` | `tryDecodeDirectChatMessage()` | èŠå¤©å°ˆç”¨æ ¼å¼ | âœ… å·²ä¿®å¾© | æ ¼å¼å·²çµ±ä¸€ |
| **ChatViewModel.swift** | 215 | `BinaryMessageEncoder.encode()` | - | åŒ…è£ç‚ºMeshMessage | âœ… æ­£å¸¸ | å¤–å±¤åŒ…è£ |
| **ChatViewModel.swift** | 242 | - | `BinaryMessageDecoder.decode()` | MeshMessageè§£åŒ… | âœ… æ­£å¸¸ | å¤–å±¤è§£åŒ… |

### 3. éŠæˆ²è¨Šæ¯å°ˆç”¨ç·¨ç¢¼/è§£ç¢¼

| æ–‡ä»¶ | è¡Œè™Ÿ | ç·¨ç¢¼æ–¹æ³• | è§£ç¢¼æ–¹æ³• | æ•¸æ“šæ ¼å¼ | ç‹€æ…‹ | å‚™è¨» |
|------|------|----------|----------|----------|------|------|
| **BingoGameViewModel.swift** | 1015,3024 | `BinaryMessageEncoder.encode()` | - | MeshMessageåŒ…è£ | âœ… æ­£å¸¸ | å¤–å±¤åŒ…è£ |
| **BingoGameViewModel.swift** | 3800 | - | `BinaryMessageDecoder.decode()` | MeshMessageè§£åŒ… | âœ… æ­£å¸¸ | å¤–å±¤è§£åŒ… |
| **BingoGameViewModel.swift** | 3200-3300 | `è‡ªå®šç¾©éŠæˆ²ç·¨ç¢¼` | `decodeStandardGameMessage()` | éŠæˆ²å°ˆç”¨æ ¼å¼ | âœ… å·²ä¿®å¾© | æ ¼å¼å·²çµ±ä¸€ |

### 4. ç¶²è·¯æ‹“æ’²å°ˆç”¨ç·¨ç¢¼/è§£ç¢¼

| æ–‡ä»¶ | è¡Œè™Ÿ | ç·¨ç¢¼æ–¹æ³• | è§£ç¢¼æ–¹æ³• | æ•¸æ“šæ ¼å¼ | ç‹€æ…‹ | å‚™è¨» |
|------|------|----------|----------|----------|------|------|
| **MeshManager.swift** | 1594 | `BinaryMessageEncoder.encodeTopology()` | `BinaryMessageDecoder.decodeTopology()` | æ‹“æ’²å°ˆç”¨æ ¼å¼ | âœ… æ­£å¸¸ | å¤§è¦æ¨¡å„ªåŒ– |
| **MeshManager.swift** | 1474 | - | `BinaryMessageDecoder.decodeTopology()` | æ‹“æ’²è§£æ | âœ… æ­£å¸¸ | 30è¬ç”¨æˆ¶å„ªåŒ– |

### 5. å…¶ä»–å°ˆç”¨å”è­°

| æ–‡ä»¶ | è¡Œè™Ÿ | å”è­°é¡å‹ | ç”¨é€” | ç‹€æ…‹ | å‚™è¨» |
|------|------|----------|------|------|------|
| **NetworkService.swift** | 1238,1247 | `OptimizedBinaryProtocol` | æ€§èƒ½å„ªåŒ–è¨Šæ¯ | âœ… æ­£å¸¸ | é…å°æ­£ç¢º |
| **LocalBlacklistManager.swift** | 143,98 | `BlacklistBinaryProtocol` | é»‘åå–®æ•¸æ“š | âœ… æ­£å¸¸ | é…å°æ­£ç¢º |

## ğŸ”§ æ•¸æ“šæ ¼å¼ä¸€è‡´æ€§æª¢æŸ¥

### MeshMessage æ¨™æº–æ ¼å¼ (å”è­°ç‰ˆæœ¬ v1)
```
[å”è­°ç‰ˆæœ¬:1] [è¨Šæ¯é¡å‹:1] [IDé•·åº¦:1] [IDå…§å®¹:è®Šé•·] [æ•¸æ“šé•·åº¦:4] [æ™‚é–“æˆ³:4] [å¯¦éš›æ•¸æ“š:è®Šé•·]
```

### èŠå¤©è¨Šæ¯å…§éƒ¨æ ¼å¼
```
[å”è­°ç‰ˆæœ¬:1] [è¨Šæ¯é¡å‹:1] [æ™‚é–“æˆ³:4] [è¨­å‚™åç¨±é•·åº¦:1] [è¨­å‚™åç¨±:è®Šé•·] [æ¶ˆæ¯IDé•·åº¦:1] [æ¶ˆæ¯ID:è®Šé•·] [è¨Šæ¯é•·åº¦:2] [è¨Šæ¯å…§å®¹:è®Šé•·]
```

### éŠæˆ²è¨Šæ¯å…§éƒ¨æ ¼å¼  
```
[é¡å‹é•·åº¦:1] [é¡å‹å…§å®¹:è®Šé•·] [æˆ¿é–“IDé•·åº¦:1] [æˆ¿é–“ID:è®Šé•·] [ç™¼é€è€…åç¨±é•·åº¦:1] [ç™¼é€è€…åç¨±:è®Šé•·] [ç™¼é€è€…IDé•·åº¦:1] [ç™¼é€è€…ID:è®Šé•·] [æ•¸æ“šé•·åº¦:2] [å¯¦éš›æ•¸æ“š:è®Šé•·]
```

## âš ï¸ ç™¼ç¾çš„å•é¡Œèˆ‡ä¿®å¾©ç‹€æ…‹

| å•é¡Œé¡å‹ | æè¿° | ä¿®å¾©ç‹€æ…‹ | ä¿®å¾©æ—¥æœŸ |
|----------|------|----------|----------|
| èŠå¤©è§£ç¢¼æ ¼å¼ä¸åŒ¹é… | `tryDecodeDirectChatMessage` ç¼ºå°‘å”è­°ç‰ˆæœ¬å’Œè¨Šæ¯é¡å‹å­—æ®µ | âœ… å·²ä¿®å¾© | 2025-07-22 |
| éŠæˆ²è§£ç¢¼ç¼ºå¤±å­—æ®µ | `decodeStandardGameMessage` ç¼ºå°‘ç™¼é€è€…IDå­—æ®µè§£æ | âœ… å·²ä¿®å¾© | 2025-07-22 |
| å‘å¾Œå…¼å®¹ä»£ç¢¼ | å­˜åœ¨Legacyç·¨ç¢¼å™¨é€ æˆæ ¼å¼æ··äº‚ | âœ… å·²æ¸…ç† | 2025-07-22 |

## ğŸ“ˆ æ€§èƒ½åˆ†æ

| ç·¨ç¢¼å™¨é¡å‹ | æ€§èƒ½ç‰¹é» | å„ªåŒ–ç‹€æ…‹ | é©ç”¨å ´æ™¯ |
|-----------|----------|----------|----------|
| æ¨™æº–ç·¨ç¢¼å™¨ | é€šç”¨ï¼Œç©©å®š | âœ… å·²å„ªåŒ– | æ‰€æœ‰æ¨™æº–è¨Šæ¯ |
| èŠå¤©ç·¨ç¢¼å™¨ | è¼•é‡ï¼Œå¿«é€Ÿ | âœ… å·²å„ªåŒ– | é »ç¹èŠå¤©è¨Šæ¯ |
| æ‹“æ’²ç·¨ç¢¼å™¨ | é«˜å£“ç¸®æ¯” | âœ… å·²å„ªåŒ– | 30è¬ç”¨æˆ¶å¤§è¦æ¨¡ç¶²è·¯ |
| éŠæˆ²ç·¨ç¢¼å™¨ | ä½å»¶é² | âœ… å·²å„ªåŒ– | å¯¦æ™‚éŠæˆ²è¨Šæ¯ |

## ğŸ¯ å»ºè­°èˆ‡ç¸½çµ

### âœ… å„ªé»
1. **æ ¼å¼çµ±ä¸€**: æ‰€æœ‰ç·¨ç¢¼å™¨éƒ½ä½¿ç”¨å”è­°ç‰ˆæœ¬v1
2. **æ€§èƒ½å„ªåŒ–**: é‡å°ä¸åŒå ´æ™¯æœ‰å°ˆé–€çš„ç·¨ç¢¼å™¨
3. **é…å°æ­£ç¢º**: æ‰€æœ‰ç·¨ç¢¼/è§£ç¢¼æ–¹æ³•éƒ½æœ‰æ­£ç¢ºçš„é…å°
4. **éŒ¯èª¤è™•ç†**: å®Œå–„çš„éŒ¯èª¤æª¢æŸ¥å’Œé‚Šç•Œæ¢ä»¶è™•ç†

### ğŸ“‹ ç¶­è­·æ¸…å–®
1. âœ… ç§»é™¤æ‰€æœ‰Legacyæ ¼å¼ä»£ç¢¼
2. âœ… çµ±ä¸€å”è­°ç‰ˆæœ¬ç‚ºv1
3. âœ… ä¿®å¾©èŠå¤©è¨Šæ¯è§£ç¢¼æ ¼å¼
4. âœ… ä¿®å¾©éŠæˆ²è¨Šæ¯è§£ç¢¼æ ¼å¼
5. âœ… ç¢ºä¿æ‰€æœ‰ç·¨ç¢¼/è§£ç¢¼æ–¹æ³•æ­£ç¢ºé…å°

### ğŸ”® æœªä¾†è€ƒæ…®
1. æ·»åŠ å”è­°ç‰ˆæœ¬å‡ç´šæ©Ÿåˆ¶
2. è€ƒæ…®å£“ç¸®ç®—æ³•æå‡æ€§èƒ½
3. ç›£æ§ç·¨ç¢¼/è§£ç¢¼æ€§èƒ½æŒ‡æ¨™
4. æ·»åŠ è‡ªå‹•åŒ–æ¸¬è©¦ç¢ºä¿æ ¼å¼ä¸€è‡´æ€§

---

**å ±å‘Šç”Ÿæˆæ™‚é–“**: 2025-07-22  
**åˆ†æç¯„åœ**: SignalAir-iOS å®Œæ•´é …ç›®  
**ç‹€æ…‹**: âœ… æ‰€æœ‰ç·¨ç¢¼/è§£ç¢¼å™¨æ ¼å¼å·²çµ±ä¸€ä¸”æ­£ç¢ºé…å°