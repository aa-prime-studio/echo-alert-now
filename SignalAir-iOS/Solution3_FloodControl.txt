ğŸŒŠ æ–¹æ¡ˆ3: æ™ºèƒ½å»£æ’­æ§åˆ¶

å•é¡Œ: å¯†é›†ç¶²è·¯è¨Šæ¯å»£æ’­é¢¨æš´
è§£æ±º: æ™ºèƒ½æ³›æ´ª + å€åŸŸå»£æ’­

1. æ¦‚ç‡æ€§è½‰ç™¼
```swift
func shouldForwardMessage(_ message: Message, from sender: String) -> Bool {
    let density = currentNetworkDensity // 8-15é€£æ¥ = é«˜å¯†åº¦
    let hopCount = message.hopCount
    let priority = message.priority
    
    // å¯†é›†ç¶²è·¯é™ä½è½‰ç™¼æ¦‚ç‡
    var forwardProbability: Double = 1.0
    
    if density > 10 { // é«˜å¯†åº¦
        forwardProbability = 0.3 // åªæœ‰30%è¨­å‚™è½‰ç™¼
    } else if density > 6 { // ä¸­å¯†åº¦  
        forwardProbability = 0.6
    }
    
    // ç·Šæ€¥è¨Šæ¯æé«˜æ¦‚ç‡
    if priority == .emergency {
        forwardProbability = min(1.0, forwardProbability * 2)
    }
    
    // è·³æ•¸è¶Šå¤šæ¦‚ç‡è¶Šä½
    forwardProbability *= pow(0.8, Double(hopCount))
    
    return Double.random(in: 0...1) < forwardProbability
}
```

2. å€åŸŸå»£æ’­æ©Ÿåˆ¶
- å°‡1å…¬é‡ŒÃ—1å…¬é‡ŒåŠƒåˆ†ç‚º100å€‹100ç±³Ã—100ç±³å°å€åŸŸ
- æ¯å€åŸŸé¸æ“‡1-2å€‹ä»£è¡¨ç¯€é»
- è¨Šæ¯å…ˆåœ¨å€åŸŸå…§å»£æ’­ï¼Œå†ç”±ä»£è¡¨ç¯€é»è·¨å€åŸŸè½‰ç™¼

3. èƒŒå£“æ§åˆ¶
```swift
class BackpressureController {
    private var messageQueue: PriorityQueue<Message> = PriorityQueue()
    private var processingRate: Double = 1000 // è¨Šæ¯/ç§’
    
    func addMessage(_ message: Message) {
        if messageQueue.count > 1000 { // éšŠåˆ—éæ»¿
            // ä¸Ÿæ£„ä½å„ªå…ˆç´šè¨Šæ¯
            messageQueue.dropLowPriority()
        }
        messageQueue.enqueue(message)
    }
}
```

4. é‡è¤‡æª¢æ¸¬å¢å¼·
```swift
class DuplicateDetector {
    private var seenMessages: Set<String> = Set()
    private var bloomFilter: BloomFilter = BloomFilter(capacity: 10000)
    
    func isDuplicate(_ messageId: String) -> Bool {
        // ç¬¬ä¸€å±¤: Bloom Filterå¿«é€Ÿæª¢æŸ¥
        if !bloomFilter.contains(messageId) {
            bloomFilter.insert(messageId)
            return false
        }
        
        // ç¬¬äºŒå±¤: ç²¾ç¢ºæª¢æŸ¥
        if seenMessages.contains(messageId) {
            return true
        }
        
        seenMessages.insert(messageId)
        return false
    }
}
```

é æœŸæ•ˆæœ:
- å»£æ’­æµé‡æ¸›å°‘70%
- è¨Šæ¯è™•ç†é€Ÿåº¦æå‡5å€
- é¿å…ç¶²è·¯å µå¡